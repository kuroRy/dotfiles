# Starship prompt configuration
# Pastel Powerline design + Tokyo Night color palette

"$schema" = 'https://starship.rs/config-schema.json'

add_newline = true
command_timeout = 500
palette = 'tokyo_night'

# ----------------------------------------------------
# format (Pastel Powerline style)
# IMPORTANT: TOML の仕様上、format は [palettes.*] テーブルより前に置くこと
# ----------------------------------------------------
format = """
[](fg:os_bg)\
$os\
[](bg:dir_bg fg:os_bg)\
$directory\
[](fg:dir_bg bg:git_bg)\
$git_branch\
$git_status\
[](fg:git_bg bg:lang_bg)\
$nodejs\
$python\
$rust\
$golang\
[](fg:lang_bg bg:infra_bg)\
$docker_context\
$kubernetes\
[](fg:infra_bg)\
$fill\
$cmd_duration\
\n$character\
"""

right_format = """$time"""

# ----------------------------------------------------
# Tokyo Night カラーパレット
# ----------------------------------------------------
[palettes.tokyo_night]
fg_light = '#e3e5e5'
fg_dark = '#090c0c'
accent = '#769ff0'
text_dim = '#a0a9cb'
os_bg = '#a3aed2'
dir_bg = '#769ff0'
git_bg = '#565f89'
lang_bg = '#212736'
infra_bg = '#1d2230'
amber = '#e0af68'
red = '#f7768e'
green = '#9ece6a'

# ----------------------------------------------------
# OS
# ----------------------------------------------------
[os]
disabled = false
style = "fg:fg_dark bg:os_bg"
format = '[$symbol ]($style)'

[os.symbols]
Macos = ""

# ----------------------------------------------------
# ディレクトリ
# ----------------------------------------------------
[directory]
style = "fg:fg_light bg:dir_bg"
format = "[ $path ]($style)"
truncation_length = 4
truncation_symbol = "…/"
truncate_to_repo = false

[directory.substitutions]
"Documents" = "󰈙 "
"Downloads" = " "
"src" = "󰲋 "

# ----------------------------------------------------
# Git
# ----------------------------------------------------
[git_branch]
symbol = ""
style = "bg:git_bg"
format = '[[ $symbol $branch ](fg:fg_light bg:git_bg)]($style)'

[git_status]
style = "bg:git_bg"
format = '[[($all_status$ahead_behind )](fg:fg_light bg:git_bg)]($style)'
ahead = '⇡${count}'
behind = '⇣${count}'
diverged = '⇕⇡${ahead_count}⇣${behind_count}'
conflicted = '=${count}'
untracked = '?${count}'
stashed = '*${count}'
modified = '!${count}'
staged = '+${count}'
renamed = '»${count}'
deleted = '✘${count}'

# ----------------------------------------------------
# fill
# ----------------------------------------------------
[fill]
symbol = ' '

# ----------------------------------------------------
# 言語 / ツール
# ----------------------------------------------------
[nodejs]
symbol = ""
style = "bg:lang_bg"
format = '[[ $symbol ($version) ](fg:accent bg:lang_bg)]($style)'
detect_files = ["package.json", ".node-version", ".nvmrc"]
detect_folders = ["node_modules"]

[python]
symbol = ""
style = "bg:lang_bg"
format = '[[ $symbol ($version) ](fg:accent bg:lang_bg)]($style)'

[rust]
symbol = ""
style = "bg:lang_bg"
format = '[[ $symbol ($version) ](fg:accent bg:lang_bg)]($style)'

[golang]
symbol = ""
style = "bg:lang_bg"
format = '[[ $symbol ($version) ](fg:accent bg:lang_bg)]($style)'

[docker_context]
symbol = ""
style = "bg:infra_bg"
format = '[[ $symbol $context ](fg:accent bg:infra_bg)]($style)'
only_with_files = true

[kubernetes]
disabled = false
symbol = "󱃾"
style = "bg:infra_bg"
format = '[[ $symbol $context(\($namespace\)) ](fg:accent bg:infra_bg)]($style)'

[aws]
disabled = true
format = '[[ 󰸏 $profile ](fg:accent bg:infra_bg)]($style)'
style = "bg:infra_bg"

# ----------------------------------------------------
# 右側
# ----------------------------------------------------
[cmd_duration]
min_time = 2000
format = "[ $duration](fg:amber)"
style = "fg:amber"

[time]
disabled = false
time_format = "%H:%M"
format = '[  $time ](fg:text_dim)'

# ----------------------------------------------------
# プロンプト
# ----------------------------------------------------
[character]
success_symbol = '[❯](bold fg:accent)'
error_symbol = '[❯](bold fg:red)'
vimcmd_symbol = '[❮](bold fg:green)'
